{% extends 'escolinha/base.html' %}
{% load static %}

{% block content %}

<div class="welcome-section">
    <img src="{% static 'escolinha/img/logoestacao2.jpg' %}" alt="Logo" class="welcome-logo">
    
    <h1 class="welcome-title">Escolinha Estação de Craques</h1>
    <p class="welcome-text">Bem-vindo ao nosso site oficial!</p>
    
    <hr style="border-color: #F4E341; opacity: 0.5; margin: 20px auto; max-width: 60%;">

    <span class="destaque-ano">Matrículas Abertas para 2026</span>
    <p class="welcome-text" style="margin-top: 15px;">
        Venha fazer parte do nosso time. Treinos para todas as idades.
    </p>
</div>

<div class="turmas-container">
    <h2 class="titulo-secao">Nossas Turmas e Horários</h2>
    <p style="color: #F4E341; margin-bottom: 20px;">Confira a categoria ideal para o seu filho(a)</p>

    <div class="grid-turmas">
        
        {% for turma in turmas %}
        <div class="card-turma">
            <h3>{{ turma.nome }}</h3>
            
            <p class="horario">{{ turma.dias }}</p>
            <p class="horario" style="margin-top: 5px;">{{ turma.horario }}</p>
            
            <button class="btn-saiba-mais" onclick="abrirModal('{{ turma.nome }}')">Saiba Mais</button>
        </div>
        
        {% empty %}
        <p style="color: white; width: 100%; text-align: center;">
            Nenhuma turma disponível no momento.
        </p>
        {% endfor %}
        </div>
</div>

<div id="meuModal" class="modal-fundo">
    <div class="modal-conteudo">
        <span class="fechar-modal" onclick="fecharModal()">&times;</span>
        <h2 id="tituloModal">Atenção</h2>
        <p style="margin-top: 15px; font-size: 1.1rem;">
            Para garantir sua vaga na turma de <strong id="nomeTurma" style="color: #4B2264;">Futebol</strong>, 
            é necessário entrar em contato com nossa secretaria.
        </p>
        <p>Agende sua aula experimental agora mesmo!</p>
        
        <a id="btnWhatsapp" href="#" target="_blank" class="btn-whatsapp-modal">
            Falar no WhatsApp
        </a>
    </div>
</div>

<script>
    // Função para abrir o modal e atualizar o link do Zap automaticamente
    function abrirModal(turmaNome) {
        var modal = document.getElementById("meuModal");
        var textoTurma = document.getElementById("nomeTurma");
        var btnWhatsapp = document.getElementById("btnWhatsapp");

        // Atualiza o texto visual
        textoTurma.innerText = turmaNome;

        // Atualiza o link do WhatsApp para já vir com a mensagem pronta:
        // Ex: "Olá, tenho interesse na turma Sub-09"
        var telefone = "5521995991357"; // Seu número
        var mensagem = "Olá, tenho interesse na turma " + turmaNome;
        var link = "https://wa.me/" + telefone + "?text=" + encodeURIComponent(mensagem);
        
        btnWhatsapp.href = link;

        // Mostra o modal
        modal.style.display = "block";
    }

    function fecharModal() {
        document.getElementById("meuModal").style.display = "none";
    }

    // Fecha se clicar fora da janelinha
    window.onclick = function(event) {
        var modal = document.getElementById("meuModal");
        if (event.target == modal) { modal.style.display = "none"; }
    }
</script>

{% endblock %}